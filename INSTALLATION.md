# Инструкция по разворачиванию проекта.
> Обратите внимание. Проект предусматривает только нативную установку на операционные системы семейства Linux.   

> Если вы хотите воспользоваться проектом на системе Windows, то Вам стоит установить Ubuntu 20.04 на виртуальную машину, либо воспользоваться подсистемой WSL2.
## <a id='main_list'>Содержание</a>:
1. [Установите Apache Airflow на свое устройство](#airflow)
1. [Поместите все файлы проекта в папку с DAG-ами](#dags)
1. [Установите Python и необхолдимые библиотеки](#python)
1. [Установите PostgreSQL на свое устройство](#psql)
1. [Настройте конфигурационный файл](#setup)
1. [Запустите задачу в Airflow](#airflow_launch)
1. [Проверьте результаты в БД PostgreSQL](#result_check)

---


## <a id='airflow'>Установка Airflow</a>
Для установки воспользуйтесь [этим гайдом](https://github.com/fingersfun/install-and-configure-apache-airflow-on-ubuntu-server).

[К содержанию](#main_list)

---


## <a id='dags'>Размещение файлов проекта в директории с DAG-ами</a>
Клонируйте папку с данным проектом в директорию с DAG-ами.   
Как правило, она находится по пути `/home/[username]/airflow/dags`

[К содержанию](#main_list)

---


## <a id='python'>Установка Python и зависимостей</a>
### Python 3.X
По умолчанию, Python 3.X установлен в Вашей системе, но пакета pip в ней может не оказаться.
Для её установки введите команду `sudo apt install python3-pip`
### Установка зависимостей.
Откройте терминал в той папке, куда Вы поместили файлы данного репозитория и введите следующую команду:   
`pip install -r requirements.txt`

[К содержанию](#main_list)

---


## <a id='psql'>Установка PostgreSQL</a>
Проводится в [разделе с установкой AirFlow](#airflow).   
> В дальнейшем, работа будет осуществляться через стандартного пользователя postgres.

[К содержанию](#main_list)

---

## <a id='setup'>Настройте несколько параметров в конфигурационном файле</a>
Откройте файл `project_settings.py` в обычном текстовом редакторе и установите те параметры, которые Вам нужны:
- `params_apikey` - API ключ с [данного](https://www.alphavantage.co/support/#api-key) сайта. 
- `params_currencies` - курсы валют и акции для наблюдения. Не рекомендуется указывать более 14 наименований, ввиду ограничений на бесплатном API.

[К содержанию](#main_list)

---


## <a id='airflow_launch'>Запустите задачу</a>
> Скоро...

[К содержанию](#main_list)

---


## <a id='result_check'>Проверьте результаты работы программы</a>
С помощью программ для доступа к СУБД, выполните запросы следующего содержания:
- Для `mart_full` - `SELECT * FROM mart_full;`
- Для `mart-delta` - `SELECT * FROM mart_delta;`


[К содержанию](#main_list)

---

<!-- ## <a id='id_name'>razdel_name</a> -->